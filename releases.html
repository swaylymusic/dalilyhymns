<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Latest Hymns – Daily Hymns</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Newest uploads from Daily Hymns — sacred music for prayer & reflection." />

  <!-- Favicons -->
  <link rel="icon" href="assets/images/favicon.ico" sizes="16x16" type="image/x-icon" />
  <link rel="icon" href="assets/images/favicon-16x16.png" sizes="16x16" type="image/png" />
  <link rel="icon" href="assets/images/favicon-32x32.png" sizes="32x32" type="image/png" />

  <link rel="stylesheet" href="css/main.css" />
</head>

<body>

<header class="site-header">
  <div class="header-inner">

    <div class="header-top">
      <div class="brand-mark">Daily Hymns</div>
      <nav class="main-nav">
        <a href="index.html">Home</a>
        <a href="about.html">About / Mission</a>
        <a href="releases.html" class="active">Latest Hymns</a>
        <a href="playlist.html">Prayer Playlists</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>

    <div class="header-main">
      <h1>Latest Hymns</h1>
      <p>Prayerful uploads to keep close to your quiet days.</p>
    </div>

  </div>
</header>

<main class="page-wrap">

  <!-- ============================= -->
  <!-- Page Intro -->
  <!-- ============================= -->
  <section class="section">
    <div class="section-label">Releases</div>
    <h2 class="section-title">Newest uploads</h2>
    <p class="section-subtitle">
      Automatically updated with the latest videos from Daily Hymns.
      A gentle place to return when you need stillness.
    </p>

    <div class="btn-row">
      <a class="btn btn-primary" href="https://www.youtube.com/@dailyhymns.channel" target="_blank" rel="noopener">
        Open YouTube Channel
      </a>
      <a class="btn btn-ghost" href="index.html">Back to Home</a>
    </div>
  </section>

  <!-- ============================= -->
  <!-- Latest Releases – AUTO UPDATES -->
  <!-- ============================= -->
  <section class="section">
    <div class="section-label">Latest</div>
    <h2 class="section-title">Newly added videos</h2>

    <!-- IMPORTANT: ID must match JS -->
    <div class="card-grid" id="latest-release-grid">
      <!-- Filled by JS -->
    </div>
  </section>

  <!-- ============================= -->
  <!-- Footer -->
  <!-- ============================= -->
  <footer class="site-footer">
    <span>© 2025 Daily Hymns · Sacred music for prayer & reflection.</span>
    <span>Contact:
      <a href="mailto:swaylymusic@gmail.com">swaylymusic@gmail.com</a>
    </span>
  </footer>

</main>

<!-- ==================================================== -->
<!-- JavaScript: Load Latest YouTube Releases (12 items)   -->
<!-- ==================================================== -->
<script>
async function loadLatestVideos(limit = 12) {
  const container = document.getElementById("latest-release-grid");
  if (!container) return;

  container.innerHTML = `
    <div class="card loading-card">Loading latest releases...</div>
  `;

  try {
    const res = await fetch("https://dailyhymns-youtube.donlee-realtor.workers.dev");
    const videos = (await res.json()).slice(0, limit);

    container.innerHTML = "";

    videos.forEach(video => {
      const card = document.createElement("article");
      card.className = "card";

      const safeTitle = (video.title || "").replace(/</g, "&lt;").replace(/>/g, "&gt;");

      card.innerHTML = `
        <img src="${video.thumbnail}" alt="${safeTitle}">
        <h3 class="card-title">${safeTitle}</h3>
        <div class="card-meta">${new Date(video.publishedAt).toLocaleDateString()}</div>
        <a class="btn btn-ghost"
           href="https://www.youtube.com/watch?v=${video.videoId}"
           target="_blank"
           rel="noopener">Watch</a>
      `;

      container.appendChild(card);
    });

    if (!videos.length) {
      container.innerHTML = "<p>No videos found yet.</p>";
    }

  } catch (error) {
    container.innerHTML = "<p>Failed to load YouTube videos.</p>";
    console.error(error);
  }
}

document.addEventListener("DOMContentLoaded", () => loadLatestVideos(12));
</script>

</body>
</html>
